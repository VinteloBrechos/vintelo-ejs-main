<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vintélo - Estatísticas</title>
    <link rel="stylesheet" href="css/estatistica.css">
    <link rel="icon" href="/imagens/brilhoescuro.png" type="image/x-icon">
</head>
<body>
    <!-- Header Mobile -->
    <header class="header-mobile">
        <nav>
            <a href="javascript:void(0)" onclick="goBack()">
                <img src="imagens/seta.png" alt="Voltar">
            </a>
            <img src="imagens/logo.png" alt="Logo">
            <a href="/menuvendedor">
                <img src="/imagens/icone sem cadastro.png" alt="Perfil" class="perfil user-profile-img">
            </a>
        </nav>
    </header>

    <!-- Header Desktop -->
    <header class="header-desktop">
        <div class="top-bar">
            <p>10% OFF na primeira compra</p>
        </div>
        <div class="main-nav">
            <a href="/homevendedor">
                <img src="imagens/logo.png" class="logo">
            </a>
            <nav>
                <a href="/categorias">Vestidos</a>
                <a href="/categorias">Saias</a>
                <a href="/categorias">Blusas</a>
                <a href="/categorias">Calças</a>
                <a href="/categorias">Outros</a>
            </nav>
            <div class="nav-icons">
                <input type="text" placeholder="Buscar...">
                <a href="/adicionar"><img src="imagens/vender peça.png"></a>
                <a href="/menuvendedor"><img src="/imagens/icone sem cadastro.png" class="user-profile-img"></a>
                <a href="/favoritos"><img src="imagens/icone coraçao.png"></a>
            </div>
        </div>
    </header>

    <main>
        <h1 class="vintelo-text">Estatísticas</h1>
        
        <div class="stats-grid">
            <div class="stat-card" onclick="showSection('vendas')">
                <h3>Produtos Vendidos</h3>
                <div class="value">0</div>
                <div class="change">Baseado em dados reais</div>
            </div>
            
            <div class="stat-card" onclick="showSection('visualizacoes')">
                <h3>Visualizações</h3>
                <div class="value">0</div>
                <div class="change">Interações com produtos</div>
            </div>
            
            <div class="stat-card" onclick="showSection('conversao')">
                <h3>Taxa Conversão</h3>
                <div class="value">0%</div>
                <div class="change">Vendas/Visualizações</div>
            </div>
        </div>

        <div class="charts-grid" id="charts-section">
            <div class="chart-card">
                <h3>Vendas por Categoria</h3>
                <div class="bar-chart">
                    <!-- Gráfico carregado via JavaScript -->
                </div>
            </div>
            
            <div class="chart-card">
                <h3>Distribuição de Receita</h3>
                <div class="pie-chart">
                    <div class="pie-center">100%</div>
                </div>
                <div class="pie-legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #8c2b44;"></div>
                        <span>Vestidos (40%)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #a64d61;"></div>
                        <span>Blusas (30%)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #c96d7e;"></div>
                        <span>Saias (20%)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #e8a5b0;"></div>
                        <span>Outros (10%)</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Seções Detalhadas -->
        <section id="vendas" class="detail-section" style="display: none;">
            <div class="section-wrapper">
                <div class="section-header">
                    <h2>Detalhes dos Produtos</h2>
                    <button class="back-btn" onclick="hideAllSections()">← Voltar</button>
                </div>
                <div class="detail-grid">
                    <div class="detail-card">
                        <h4>Total Cadastrados</h4>
                        <div class="detail-value">0</div>
                        <p>Produtos no seu brechó</p>
                    </div>
                    <div class="detail-card">
                        <h4>Vendas Realizadas</h4>
                        <div class="detail-value">0</div>
                        <p>Produtos vendidos</p>
                    </div>
                    <div class="detail-card">
                        <h4>Disponíveis</h4>
                        <div class="detail-value">0</div>
                        <p>Produtos à venda</p>
                    </div>
                </div>
                <div class="progress-section">
                    <h4>Meta: 10 produtos cadastrados</h4>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%;"></div>
                    </div>
                    <p>0% da meta atingida</p>
                </div>
            </div>
        </section>

        <section id="visualizacoes" class="detail-section" style="display: none;">
            <div class="section-wrapper">
                <div class="section-header">
                    <h2>Detalhes das Visualizações</h2>
                    <button class="back-btn" onclick="hideAllSections()">← Voltar</button>
                </div>
                <div class="detail-grid">
                    <div class="detail-card">
                        <h4>Produtos Ativos</h4>
                        <div class="detail-value">0</div>
                        <p>Produtos disponíveis</p>
                    </div>
                    <div class="detail-card">
                        <h4>Visualizações</h4>
                        <div class="detail-value">0</div>
                        <p>Interações com produtos</p>
                    </div>
                    <div class="detail-card">
                        <h4>Alcance</h4>
                        <div class="detail-value">0</div>
                        <p>Pessoas alcançadas</p>
                    </div>
                </div>
                <div class="progress-section">
                    <h4>Meta: 100 visualizações</h4>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%;"></div>
                    </div>
                    <p>0% da meta atingida</p>
                </div>
            </div>
        </section>

        <section id="conversao" class="detail-section" style="display: none;">
            <div class="section-wrapper">
                <div class="section-header">
                    <h2>Detalhes da Performance</h2>
                    <button class="back-btn" onclick="hideAllSections()">← Voltar</button>
                </div>
                <div class="detail-grid">
                    <div class="detail-card">
                        <h4>Visitantes</h4>
                        <div class="detail-value">0</div>
                        <p>Pessoas que visitaram</p>
                    </div>
                    <div class="detail-card">
                        <h4>Vendas</h4>
                        <div class="detail-value">0</div>
                        <p>Conversões realizadas</p>
                    </div>
                    <div class="detail-card">
                        <h4>Taxa</h4>
                        <div class="detail-value">0%</div>
                        <p>Percentual de conversão</p>
                    </div>
                </div>
                <div class="progress-section">
                    <h4>Performance</h4>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%;"></div>
                    </div>
                    <p>0% de taxa de conversão atual</p>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <img src="imagens/logo2.jpeg" alt="Logo">
        <div class="social">
            <p>Siga nossas redes sociais</p>
            <div class="social-links">
                <a href="https://facebook.com" target="_blank"><img src="imagens/Facebook.png" alt="Facebook"></a>
                <a href="https://twitter.com" target="_blank"><img src="imagens/Pinterest.png" alt="Pinterest"></a>
                <a href="https://www.instagram.com/vintelobrechos" target="_blank"><img src="imagens/Instagram.png" alt="Instagram"></a>
            </div>
        </div>
        <p class="copyright">©2024 Vintélo. Todos os direitos reservados.</p>
    </footer>
    

    


    <script src="/js/perfil-autenticado.js"></script>
    <script src="/js/navegacao.js"></script>
    <script src="/js/estatisticas-vendedor.js"></script>
    <script>
        // Forçar atualização da imagem de perfil
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                const userData = await window.PerfilAutenticado.getUserData();
                if (userData.isAuthenticated && userData.user.imagem) {
                    const profileImages = document.querySelectorAll('.user-profile-img');
                    profileImages.forEach(img => {
                        img.src = userData.user.imagem.startsWith('/') ? userData.user.imagem : '/' + userData.user.imagem;
                    });
                }
            } catch (error) {
                console.log('Erro ao carregar imagem de perfil:', error);
            }
        });
        
        function goBack() {
            window.history.back();
        }
    </script>
</body>
</html>